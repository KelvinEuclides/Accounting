# Como Usar a Funcionalidade de Limpeza de Dados
# How to Use the Data Clearing Feature

## üáµüáπ Portugu√™s

### Passos para Limpar Dados

1. **Aceder √†s Configura√ß√µes**
   - Abra o aplicativo Pakitini
   - Navegue at√© a tela "Configura√ß√µes" (Settings)
   - Role at√© a se√ß√£o "Seguran√ßa"

2. **Iniciar Limpeza**
   - Clique no bot√£o "Limpar Dados" (√≠cone de lixeira vermelha)
   - ‚ö†Ô∏è ATEN√á√ÉO: Este bot√£o est√° marcado como destrutivo (cor vermelha)

3. **Selecionar Dados para Limpar**
   Um di√°logo aparecer√° com as seguintes op√ß√µes:

   **Op√ß√£o 1: Limpar Tudo**
   - ‚òëÔ∏è Limpar Todos os Dados
   
   **Op√ß√£o 2: Limpar Seletivamente**
   - ‚òê Limpar Vendas
   - ‚òê Limpar Despesas
   - ‚òê Limpar Dep√≥sitos
   - ‚òê Limpar Transa√ß√µes
   - ‚òê Limpar Produtos

   **Importante:**
   - Voc√™ pode selecionar m√∫ltiplas op√ß√µes
   - "Limpar Todos os Dados" apagar√° tudo
   - Suas configura√ß√µes e categorias ser√£o preservadas

4. **Primeira Confirma√ß√£o**
   - Selecione o que deseja limpar
   - Clique em "Confirmar" para continuar
   - Clique em "Cancelar" para abortar

5. **Confirma√ß√£o Final**
   Um segundo di√°logo aparecer√° com:
   - Mensagem de aviso em vermelho
   - Campo de texto para confirma√ß√£o
   - Instru√ß√µes: "Digite 'CONFIRMAR' para continuar"

   **Para Prosseguir:**
   - Digite exatamente: **CONFIRMAR** (em mai√∫sculas)
   - O bot√£o "Excluir" s√≥ ser√° ativado quando o texto estiver correto
   - Clique em "Excluir" para executar a limpeza

6. **Execu√ß√£o**
   - Um indicador de carregamento aparecer√°
   - Mensagem: "Limpando dados..."
   - Aguarde a conclus√£o

7. **Resultado**
   - **Sucesso:** Mensagem verde "Dados limpos com sucesso"
     - O di√°logo fechar√° automaticamente ap√≥s 2 segundos
   - **Erro:** Mensagem vermelha com detalhes do erro
     - Clique em "Cancelar" para fechar

### ‚ö†Ô∏è Avisos Importantes

- **ESTA A√á√ÉO N√ÉO PODE SER DESFEITA!**
- N√£o h√° backup autom√°tico
- N√£o h√° restaura√ß√£o dispon√≠vel
- Seus dados ser√£o permanentemente apagados
- Sua conta de usu√°rio N√ÉO ser√° deletada
- Suas configura√ß√µes N√ÉO ser√£o apagadas
- Suas categorias N√ÉO ser√£o apagadas

### O Que √© Preservado

‚úÖ **Mantido:**
- Conta de usu√°rio
- Configura√ß√µes de prefer√™ncia
- Categorias de despesas/receitas
- Idioma e moeda
- Temas e notifica√ß√µes

‚ùå **Removido (se selecionado):**
- Todas as vendas
- Todas as despesas
- Todos os dep√≥sitos
- Todas as transa√ß√µes
- Todos os produtos

---

## üá¨üáß English

### Steps to Clear Data

1. **Access Settings**
   - Open the Pakitini app
   - Navigate to "Settings" screen
   - Scroll to the "Security" section

2. **Start Clearing**
   - Click the "Clear Data" button (red trash icon)
   - ‚ö†Ô∏è WARNING: This button is marked as destructive (red color)

3. **Select Data to Clear**
   A dialog will appear with the following options:

   **Option 1: Clear Everything**
   - ‚òëÔ∏è Clear All Data
   
   **Option 2: Clear Selectively**
   - ‚òê Clear Sales
   - ‚òê Clear Expenses
   - ‚òê Clear Deposits
   - ‚òê Clear Transactions
   - ‚òê Clear Products

   **Important:**
   - You can select multiple options
   - "Clear All Data" will delete everything
   - Your settings and categories will be preserved

4. **First Confirmation**
   - Select what you want to clear
   - Click "Confirm" to continue
   - Click "Cancel" to abort

5. **Final Confirmation**
   A second dialog will appear with:
   - Warning message in red
   - Text field for confirmation
   - Instructions: "Type 'CONFIRM' to continue"

   **To Proceed:**
   - Type exactly: **CONFIRM** (in capital letters)
   - The "Delete" button will only activate when text is correct
   - Click "Delete" to execute the clearing

6. **Execution**
   - A loading indicator will appear
   - Message: "Clearing data..."
   - Wait for completion

7. **Result**
   - **Success:** Green message "Data cleared successfully"
     - Dialog will close automatically after 2 seconds
   - **Error:** Red message with error details
     - Click "Cancel" to close

### ‚ö†Ô∏è Important Warnings

- **THIS ACTION CANNOT BE UNDONE!**
- No automatic backup
- No restore available
- Your data will be permanently deleted
- Your user account will NOT be deleted
- Your settings will NOT be deleted
- Your categories will NOT be deleted

### What is Preserved

‚úÖ **Kept:**
- User account
- Preference settings
- Expense/income categories
- Language and currency
- Themes and notifications

‚ùå **Removed (if selected):**
- All sales
- All expenses
- All deposits
- All transactions
- All products

---

## üá´üá∑ Fran√ßais

### √âtapes pour Effacer les Donn√©es

1. **Acc√©der aux Param√®tres**
   - Ouvrez l'application Pakitini
   - Naviguez vers l'√©cran "Param√®tres"
   - Faites d√©filer jusqu'√† la section "S√©curit√©"

2. **D√©marrer l'Effacement**
   - Cliquez sur le bouton "Effacer les Donn√©es" (ic√¥ne de corbeille rouge)
   - ‚ö†Ô∏è ATTENTION: Ce bouton est marqu√© comme destructif (couleur rouge)

3. **S√©lectionner les Donn√©es √† Effacer**
   Une bo√Æte de dialogue appara√Ætra avec les options suivantes:

   **Option 1: Tout Effacer**
   - ‚òëÔ∏è Effacer Toutes les Donn√©es
   
   **Option 2: Effacer S√©lectivement**
   - ‚òê Effacer les Ventes
   - ‚òê Effacer les D√©penses
   - ‚òê Effacer les D√©p√¥ts
   - ‚òê Effacer les Transactions
   - ‚òê Effacer les Produits

   **Important:**
   - Vous pouvez s√©lectionner plusieurs options
   - "Effacer Toutes les Donn√©es" supprimera tout
   - Vos param√®tres et cat√©gories seront pr√©serv√©s

4. **Premi√®re Confirmation**
   - S√©lectionnez ce que vous voulez effacer
   - Cliquez sur "Confirmer" pour continuer
   - Cliquez sur "Annuler" pour abandonner

5. **Confirmation Finale**
   Une deuxi√®me bo√Æte de dialogue appara√Ætra avec:
   - Message d'avertissement en rouge
   - Champ de texte pour confirmation
   - Instructions: "Tapez 'CONFIRMER' pour continuer"

   **Pour Continuer:**
   - Tapez exactement: **CONFIRMER** (en majuscules)
   - Le bouton "Supprimer" ne s'activera que lorsque le texte est correct
   - Cliquez sur "Supprimer" pour ex√©cuter l'effacement

6. **Ex√©cution**
   - Un indicateur de chargement appara√Ætra
   - Message: "Effacement des donn√©es..."
   - Attendez la fin

7. **R√©sultat**
   - **Succ√®s:** Message vert "Donn√©es effac√©es avec succ√®s"
     - La bo√Æte de dialogue se fermera automatiquement apr√®s 2 secondes
   - **Erreur:** Message rouge avec d√©tails de l'erreur
     - Cliquez sur "Annuler" pour fermer

### ‚ö†Ô∏è Avertissements Importants

- **CETTE ACTION NE PEUT PAS √äTRE ANNUL√âE!**
- Pas de sauvegarde automatique
- Pas de restauration disponible
- Vos donn√©es seront d√©finitivement supprim√©es
- Votre compte utilisateur ne sera PAS supprim√©
- Vos param√®tres ne seront PAS supprim√©s
- Vos cat√©gories ne seront PAS supprim√©es

### Ce Qui est Pr√©serv√©

‚úÖ **Conserv√©:**
- Compte utilisateur
- Param√®tres de pr√©f√©rence
- Cat√©gories de d√©penses/revenus
- Langue et devise
- Th√®mes et notifications

‚ùå **Supprim√© (si s√©lectionn√©):**
- Toutes les ventes
- Toutes les d√©penses
- Tous les d√©p√¥ts
- Toutes les transactions
- Tous les produits

---

## Technical Notes for Developers

### Testing the Feature

1. **Prerequisites:**
   - User must be logged in
   - Navigate to Settings screen

2. **Test Scenarios:**

   **Scenario 1: Cancel at First Dialog**
   - Click "Clear Data"
   - Select options
   - Click "Cancel"
   - ‚úì Nothing should be deleted

   **Scenario 2: Cancel at Final Confirmation**
   - Click "Clear Data"
   - Select options
   - Click "Confirm"
   - Click "Cancel" (or close dialog)
   - ‚úì Nothing should be deleted

   **Scenario 3: Wrong Confirmation Text**
   - Click "Clear Data"
   - Select options
   - Click "Confirm"
   - Type "confirm" (lowercase)
   - ‚úì Delete button should be disabled

   **Scenario 4: Successful Clearing**
   - Click "Clear Data"
   - Select specific items
   - Click "Confirm"
   - Type "CONFIRMAR" (or "CONFIRM"/"CONFIRMER")
   - Click "Delete"
   - ‚úì Selected data should be deleted
   - ‚úì Success message should appear
   - ‚úì Dialog should auto-close

   **Scenario 5: Clear All Data**
   - Click "Clear Data"
   - Select "Clear All Data"
   - Follow confirmation
   - ‚úì All transactional data deleted
   - ‚úì Settings and categories preserved

### Code References

- **UI:** `OtherScreens.kt` - Lines 574-861
- **ViewModel:** `DataClearingViewModel.kt`
- **Repository:** `DataClearingRepository.kt`
- **Strings:** `Strings.kt` - Lines 142-161

### State Management

The feature uses Compose state management:
```kotlin
val clearingUiState by dataClearingViewModel.uiState.collectAsState()
```

State includes:
- `selectedOptions`: Set of selected clear options
- `isLoading`: Boolean for showing progress
- `errorMessage`: String for errors
- `successMessage`: String for success feedback
```
